# Production-style override: no host mounts, no reload, use env file for secrets.
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    environment:
      DATABASE_URL: postgresql://postgres:${POSTGRES_PASSWORD:-postgres}@postgres:5432/personalfinance
      SECRET_KEY: ${SECRET_KEY:-change-me-in-production}
      DEBUG: "false"
      AUTO_CREATE_DB: "false"
      CORS_ORIGINS: ${CORS_ORIGINS:-http://localhost:3000}
    volumes: []
    command: uvicorn app.main:app --host 0.0.0.0 --port 8000
    restart: unless-stopped
